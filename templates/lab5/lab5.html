{% extends "base.html" %}

{% block lab %}Лабораторная работа 5{% endblock %}

{% block main %}
    <h1>База знаний</h1>
    
    <div class="menu">
        <ul>
            <li><a href="/">Главная</a></li>
            {% if not login %}
                <li><a href="/lab5/login">Вход</a></li>
                <li><a href="/lab5/register">Регистрация</a></li>
            {% else %}
                <li><a href="/lab5/list">Мои статьи</a></li>
                <li><a href="/lab5/create">Создать статью</a></li>
                <li><a href="/lab5/users">Все пользователи</a></li>
                <li><a href="/lab5/profile">Профиль</a></li>
                <li><a href="/lab5/logout">Выйти</a></li>
            {% endif %}
        </ul>
    </div>

    <div class="user-info">
        {% if login %}
            <p>Вы вошли как: {{ login }}</p>
        {% else %}
            <p>Anonymous</p>
        {% endif %}
    </div>

    <h2>Публичные статьи</h2>
    {% if public_articles %}
        {% for article in public_articles %}
            <div class="article" style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
                <h3>{{ article['title'] }}</h3>
                <p>{{ article['article_text'] }}</p>
                <small>
                    Автор: {{ article['author'] }}
                    {% if article['is_favorite'] %} | Избранная {% endif %}
                </small>
            </div>
        {% endfor %}
    {% else %}
        <p>Пока нет публичных статей</p>
    {% endif %}
{% endblock %}